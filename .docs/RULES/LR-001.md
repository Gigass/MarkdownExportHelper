# LR-001: 许可证一致性规则

## 规则信息

**规则ID**: LR-001  
**规则名称**: 许可证一致性规则  
**状态**: 活跃  
**优先级**: 高  
**创建日期**: 2024-12-19  
**维护者**: AI 开发伙伴  

## 规则定义

### 触发情景
- 添加新的第三方依赖库
- 修改现有依赖库版本
- 引入新的代码片段或组件
- 项目许可证变更

### 核心指令
1. **主项目许可证**: 项目使用 Apache License 2.0，所有新增代码必须兼容此许可证
2. **第三方库检查**: 引入任何第三方库前必须验证其许可证与 Apache License 2.0 的兼容性
3. **许可证文档更新**: 任何许可证相关变更必须同步更新 `.docs/STATE/PROJECT-OVERVIEW.md`
4. **许可证声明**: 所有第三方库必须在文档中明确声明其许可证类型

### 兼容性矩阵

#### 与 Apache License 2.0 兼容的许可证
- ✅ MIT License
- ✅ Apache License 2.0
- ✅ BSD License (2-clause, 3-clause)
- ✅ ISC License
- ✅ Unlicense
- ✅ CC0

#### 需要谨慎评估的许可证
- ⚠️ GPL v2/v3 (可能要求整个项目开源)
- ⚠️ LGPL (需要动态链接)
- ⚠️ MPL (需要文件级许可证声明)

#### 不兼容的许可证
- ❌ 专有许可证
- ❌ 商业许可证（需要付费）

## 执行流程

### 添加新依赖时的检查清单
1. **许可证验证**: 确认库的许可证类型
2. **兼容性检查**: 验证与 Apache License 2.0 的兼容性
3. **文档更新**: 更新 `.docs/STATE/PROJECT-OVERVIEW.md` 中的第三方库列表
4. **版本记录**: 记录库的版本和许可证信息

### 代码引入规则
1. **代码片段**: 从开源项目复制的代码片段必须保留原始许可证声明
2. **组件复用**: 复用的组件必须明确标注来源和许可证
3. **许可证文件**: 确保 LICENSE 文件包含所有必要的许可证信息

## 验证方法

### 自动化检查
- 使用 `npm audit` 或类似工具检查依赖许可证
- 定期运行许可证合规性检查脚本

### 手动验证
- 检查每个第三方库的官方许可证文件
- 验证许可证声明的准确性
- 确认许可证版本的一致性

## 违规处理

### 轻微违规
- 缺少许可证声明
- 许可证信息不完整

**处理方式**: 立即补充缺失信息，更新相关文档

### 严重违规
- 引入不兼容的许可证
- 违反许可证条款

**处理方式**: 立即移除违规依赖，寻找替代方案

## 维护责任

- **AI 开发伙伴**: 负责主动检查和维护许可证一致性
- **代码审查**: 每次代码变更都必须包含许可证检查
- **定期审查**: 每月审查一次许可证合规性

## 相关文档

- `.docs/STATE/PROJECT-OVERVIEW.md` - 项目许可证信息
- `LICENSE` - 主项目许可证文件
- `README.md` - 项目许可证说明

---

*规则状态: 活跃*  
*最后更新: 2024-12-19*  
*下次审查: 2025-01-19* 